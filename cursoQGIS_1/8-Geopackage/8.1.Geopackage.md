# GeoPackage

## ¿Qué es un GeoPackage?**

- Formato de base de datos espacial basado en SQLite.
- Ventajas: abierto, portable, y compatible con múltiples tipos de datos espaciales y tabulares.
- Comparación con otros formatos (Shapefile, PostGIS, etc.)

## Componentes de un archivo .gpkg

Un archivo GeoPackage (`.gpkg`) se basa en la estructura de una base de datos SQLite y se compone de varios elementos que permiten almacenar y organizar datos geoespaciales.

Sus principales componentes son:

1. **Tablas de datos vectoriales**  
   - Contienen datos geométricos (puntos, líneas y polígonos) asociados con atributos.
   - Cada capa vectorial se almacena en una tabla independiente dentro de la base de datos.
   - Incluye una columna especial llamada `geometry` donde se almacena la geometría en formato binario, junto con otras columnas de atributos.

2. **Tablas de datos raster**  
   - Permiten almacenar imágenes y otros datos rasterizados (como mapas de elevación) dentro del archivo GeoPackage.
   - Las imágenes raster se dividen en mosaicos para permitir el acceso eficiente a diferentes niveles de zoom.
   - Estos datos suelen estar en una tabla llamada `gpkg_tile_matrix` , que organiza y referencia los mosaicos raster.

3. **Tablas de metadatos**  
   - `gpkg_metadata` y `gpkg_metadata_reference` son tablas que almacenan metadatos sobre el archivo, capas y tablas de datos.
   - Los metadatos pueden incluir información sobre el origen, autoría, y descripción de los datos, así como las proyecciones utilizadas.

4. **Sistemas de referencia espacial (CRS)**  
   - La tabla `gpkg_spatial_ref_sys` contiene información sobre los sistemas de referencia espacial (CRS) que se utilizan en el archivo.
   - Permite que los datos geométricos mantengan coherencia en términos de proyección y sistema de coordenadas.

5. **Tabla de relaciones espaciales**  
   - `gpkg_geometry_columns` define el tipo de geometría (punto, línea, polígono, etc.) y el sistema de referencia espacial asociado para cada capa vectorial.
   - Permite a las aplicaciones entender cómo interpretar la geometría almacenada.

6. **Tablas de mosaicos de imágenes**  
   - `gpkg_tile_matrix` y `gpkg_tile_matrix_set` se encargan de organizar los mosaicos raster almacenados.
   - Facilitan la visualización de datos raster a diferentes niveles de detalle y escalan eficientemente las imágenes según el zoom.

7. **Tablas de estilos y símbolos (opcional)**  
   - GeoPackage permite almacenar datos de estilo y simbología para que los datos vectoriales puedan visualizarse con un formato específico.
   - Aunque este componente es opcional, algunos paquetes de software GIS utilizan tablas adicionales para guardar esta información de estilo.

8. **Tablas de extensiones**  
   - La tabla `gpkg_extensions` contiene información sobre extensiones adicionales que puedan haberse aplicado al GeoPackage.
   - Las extensiones permiten agregar funcionalidades más allá del estándar GeoPackage, como herramientas específicas o soporte para datos 3D.

GeoPackage es un formato de almacenamiento compacto y eficiente que organiza los datos geoespaciales en una estructura de base de datos para facilitar su manipulación, acceso y visualización en aplicaciones GIS.

## Ventajas de usar GeoPackage frente a otros formatos en GIS

GeoPackage ofrece varias ventajas frente a otros formatos GIS comunes, como Shapefile, GeoJSON o KML, debido a su capacidad de almacenamiento y eficiencia. A continuación, se detallan las principales ventajas de usar GeoPackage:

1. **Compatibilidad y estandarización**  
   GeoPackage es un estándar abierto desarrollado por OGC (Open Geospatial Consortium), lo cual asegura que el formato sea compatible con una amplia variedad de software GIS, incluyendo tanto herramientas comerciales como de código abierto (QGIS, ArcGIS, etc.).

2. **Índices espaciales**.
   El uso de índices espaciales incrementa la velocidad de búsquedas espaciales y la visualización de datos. Se recomienda emplearlos cuando se superan los 1000 registros.

3. **Soporte para múltiples tipos de datos en un solo archivo**  
   Un GeoPackage puede almacenar datos vectoriales, datos raster, tablas de atributos y hasta estilos de representación en un solo archivo `.gpkg`, lo cual reduce la complejidad de manejar varios archivos o formatos separados. Es decir, almacena distintos tipos de geometría en un único archivo.

4. **Soporte para transacciones y edición**  
     GeoPackage utiliza SQLite como base de datos subyacente, lo que permite un acceso rápido y eficiente a los datos. Gracias a ello, GeoPackage permite realizar operaciones de edición y transacciones de manera segura, lo que es útil en aplicaciones que requieren actualizar los datos GIS en tiempo real o en trabajos colaborativos.

5. **Mayor capacidad de almacenamiento**  
   A diferencia de Shapefile, que tiene limitaciones de tamaño (2 GB) y restricciones de longitud de nombres de campo, GeoPackage puede manejar grandes volúmenes de datos sin estas limitaciones (hasta 140 Tb) haciéndolo adecuado para grandes proyectos GIS.

6. **Compatibilidad con proyecciones**  
   GeoPackage admite múltiples sistemas de referencia espacial (CRS), incluyendo soporte completo para proyecciones, a diferencia de formatos como KML o GPX, que solo soportan coordenadas en latitud y longitud (WGS84).

7. **Fiabilidad y robustez**  
   Al estar basado en SQLite, es menos propenso a errores de corrupción en comparación con otros formatos de archivo basados en texto o binarios.

GeoPackage es un formato moderno y versátil que ofrece una combinación única de eficiencia, capacidad de almacenamiento, compatibilidad y facilidad de uso, siendo una excelente opción para gestionar datos GIS de manera completa y eficaz.

## Crear un archivo Geopackage

Para crear un archivo GeoPackage en QGIS, puedes seguir estos pasos:

1. Abre QGIS y ve a la barra de menú.
2. Selecciona **Capa** > **Crear capa** > **Nueva capa GeoPackage**.
3. En la ventana de diálogo que aparece:
   - Elige la ubicación y el nombre del archivo GeoPackage.
   - Define el sistema de referencia espacial (CRS) que deseas utilizar.
   - Agrega las tablas (capas) que deseas incluir en el archivo.
4. Haz clic en **Aceptar** para crear el archivo.

[Documentación de QGIS: Crear capas - Geopackage](https://docs.qgis.org/3.34/es/docs/user_manual/managing_data_source/create_layers.html#index-2)

## Recursos adicionales

- Documentación oficial de GeoPackage: [https://www.geopackage.org/](https://www.geopackage.org/)
- Manual de usuario de QGIS: [https://docs.qgis.org/](https://docs.qgis.org/)
